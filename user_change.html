<!DOCTYPE html>
<html>
<style>
    table {
        width: 100%;
        border: 1px solid #444444;
        border-collapse: collapse;
    }

    th,
    td {
        border: 1px solid #444444;
    }
</style>

<body>
    <h2>회원 정보 수정</h2>
    <script>
        var Request = function () {
            this.getParameter = function (name) {
                var rtnval = '';
                var nowAddress = unescape(location.href);
                var parameters = (nowAddress.slice(nowAddress.indexOf('?') + 1,
                    nowAddress.length)).split('&');
                for (var i = 0; i < parameters.length; i++) {
                    var varName = parameters[i].split('=')[0];
                    if (varName.toUpperCase() == name.toUpperCase()) {
                        rtnval = parameters[i].split('=')[1];
                        break;
                    }
                }
                return rtnval;
            }
        }
        
        var request = new Request();

        var id = request.getParameter('id');

        var s = '[{"id": "hh", "name":"Hong","sub_date":"19.02.11", "grade": "professor", "prof_ok":"19.02.11", "last_login":"19.8.16", "pw":"qwer1234"},'
            + '{"id": "kk", "name":"Kim","sub_date":"19.02.12", "grade": "student", "prof_ok":"none", "last_login":"19.5.12", "pw":"qwer1234"},'
            + '{"id": "pp", "name":"Park","sub_date":"19.01.11", "grade": "admin", "prof_ok":"none", "last_login":"19.11.25", "pw":"qwer1234"}]';

        var user_list = JSON.parse(s);
        var row = Number(user_list.length);
        for (i = 0; i < row; i++) {
            if(user_list[i].id == id){
                break;
            }
        }
        document.write("<form name = \'f\'>")
        document.write("<table><tr><td>아이디</td><td>" + user_list[i].id+"</td></tr>");
        document.write("<tr><td>이름</td><td><input type=\'text\' name=\'name\' value=\'"+user_list[i].name+"\'></td></tr>");
        document.write("<tr><td>등급</td><td>");
        document.write("<select name = \'grade\'>");
        if(user_list[i].grade == 'professor'){
            document.write("<option value=\'prof\' selected>professor</option>");
            document.write("<option value=\'student\'>student</option>");
            document.write("<option value=\'admin\'>admin</option>");
        } else if(user_list[i].grade == 'student'){
            document.write("<option value=\'prof\'>professor</option>");
            document.write("<option value=\'student\' selected>student</option>");
            document.write("<option value=\'admin\'>admin</option>");
        } else if(user_list[i].grade == 'admin'){
            document.write("<option value=\'prof\'>professor</option>");
            document.write("<option value=\'student\'>student</option>");
            document.write("<option value=\'admin\' selected>admin</option>");
        }
        document.write("</select></td></tr>");
        document.write("<tr><td>비밀번호</td><td><input type=\'password\' name=\'name\' value=\'"+user_list[i].pw + "\'></td></tr>");
        document.write("<tr><td>비밀번호 확인</td><td><input type=\'password2\' name=\'name\'></td></tr>");    
        document.write("</table>");
        
        document.write("</form>");  
        document.write("<button onclick=\'checkForm()\'>수정</button>");
        function checkForm(){
            form = document.f;
            // if(form.name.value==""){
            //     alert("이름을 입력하세요");
            //     form.name.focus();
            //     return;
            // }
            alert(form.name.value);
            if(form.password.value==""){
                alert("암호를 입력하세요");
                form.password.focus();
                return;
            }
            if(form.password.value!=form.password2.value){
                alert("암호가 일치하지 않습니다");
                form.password.focus();
                return;
            }
            location.href="user_detail.html?id="+id;
        }
    </script>

</body>

</html>